{"version":3,"sources":["../source/format.test.js"],"names":["format","parameters","push","apply","describe","it","should","equal","options","formatExtension","number","extension","phone","country","ext","deep","thrower","throw","countryCallingCode"],"mappings":"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","file":"format.test.js","sourcesContent":["import metadata from '../metadata.min'\r\nimport formatter, { local_to_international_style } from '../source/format'\r\n\r\nfunction format(...parameters)\r\n{\r\n\tparameters.push(metadata)\r\n\treturn formatter.apply(this, parameters)\r\n}\r\n\r\ndescribe('format', () =>\r\n{\r\n\tit('should work with the first object argument expanded', function()\r\n\t{\r\n\t\tformat('+12133734253', 'National').should.equal('(213) 373-4253')\r\n\t\tformat('2133734253', 'US', 'International').should.equal('+1 213 373 4253')\r\n\t})\r\n\r\n\tit('should sort out the arguments', function()\r\n\t{\r\n\t\tconst options =\r\n\t\t{\r\n\t\t\tformatExtension: (number, extension) => `${number} доб. ${extension}`\r\n\t\t}\r\n\r\n\t\tformat\r\n\t\t({\r\n\t\t\tphone   : '8005553535',\r\n\t\t\tcountry : 'RU',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'National', options).should.equal('800 555-35-35 доб. 123')\r\n\r\n\t\tformat('+78005553535', 'National', options).should.equal('800 555-35-35')\r\n\t\tformat('8005553535', 'RU', 'National', options).should.equal('800 555-35-35')\r\n\t})\r\n\r\n\tit('should format valid phone numbers', function()\r\n\t{\r\n\t\t// Switzerland\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'International').should.equal('+41 44 668 18 00')\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'E.164').should.equal('+41446681800')\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'RFC3966').should.equal('tel:+41446681800')\r\n\t\tformat({ country: 'CH', phone: '446681800' }, 'National').should.equal('044 668 18 00')\r\n\r\n\t\t// France\r\n\t\tformat({ country: 'FR', phone: '169454850' }, 'National').should.equal('01 69 45 48 50')\r\n\r\n\t\t// KZ\r\n\t\tformat('+7 702 211 1111', 'National').should.deep.equal('702 211 1111')\r\n\t})\r\n\r\n\tit('should work in edge cases', function()\r\n\t{\r\n\t\tlet thrower\r\n\r\n\t\t// Explicitly specified country and derived country conflict\r\n\t\tformat('+12133734253', 'RU', 'National').should.equal('+12133734253')\r\n\r\n\t\t// No phone number\r\n\t\tformat('', 'RU', 'International').should.equal('+7')\r\n\t\tformat('', 'RU', 'National').should.equal('')\r\n\r\n\t\t// No suitable format\r\n\t\tformat('+121337342530', 'US', 'National').should.equal('21337342530')\r\n\t\t// No suitable format (leading digits mismatch)\r\n\t\tformat('699999', 'AD', 'National').should.equal('699999')\r\n\r\n\t\t// Numerical `value`\r\n\t\tthrower = () => format(89150000000, 'RU', 'National')\r\n\t\tthrower.should.throw('A phone number must either be a string or an object of shape { phone, [country] }.')\r\n\r\n\t\t// No metadata for country\r\n\t\tformat('+121337342530', 'USA', 'National').should.equal('21337342530')\r\n\t\tformat('21337342530', 'USA', 'National').should.equal('21337342530')\r\n\r\n\t\t// No format type\r\n\t\tthrower = () => format('+123')\r\n\t\tthrower.should.throw('Format type argument not passed')\r\n\r\n\t\t// Unknown format type\r\n\t\tthrower = () => format('123', 'US', 'Gay')\r\n\t\tthrower.should.throw('Unknown format type')\r\n\r\n\t\t// No metadata\r\n\t\tthrower = () => formatter('123', 'US', 'Gay')\r\n\t\tthrower.should.throw('Metadata is required')\r\n\r\n\t\t// No formats\r\n\t\tformat('012345', 'AC', 'National').should.equal('012345')\r\n\t})\r\n\r\n\tit('should convert local to international style format', function()\r\n\t{\r\n\t\tlocal_to_international_style('(xxx) xxx-xx-xx').should.equal('xxx xxx xx xx')\r\n\t\tlocal_to_international_style('(xxx)xxx').should.equal('xxx xxx')\r\n\t})\r\n\r\n\tit('should format phone number extensions', function()\r\n\t{\r\n\t\t// National\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry: 'US',\r\n\t\t\tphone: '2133734253',\r\n\t\t\text: '123'\r\n\t\t},\r\n\t\t'National').should.equal('(213) 373-4253 ext. 123')\r\n\r\n\t\t// International\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'International').should.equal('+1 213 373 4253 ext. 123')\r\n\r\n\t\t// International\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'International').should.equal('+1 213 373 4253 ext. 123')\r\n\r\n\t\t// E.164\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'E.164').should.equal('+12133734253')\r\n\r\n\t\t// RFC3966\r\n\t\tformat\r\n\t\t({\r\n\t\t\tcountry : 'US',\r\n\t\t\tphone   : '2133734253',\r\n\t\t\text     : '123'\r\n\t\t},\r\n\t\t'RFC3966').should.equal('tel:+12133734253;ext=123')\r\n\t})\r\n\r\n\tit('should format possible numbers', function()\r\n\t{\r\n\t\tformat({ countryCallingCode: '7', phone: '1111111111' }, 'E.164')\r\n\t\t\t.should.equal('+71111111111')\r\n\t})\r\n})"]}