{"version":3,"sources":["../source/RFC3966.js"],"names":["is_viable_phone_number","parseRFC3966","text","number","ext","split","part","name","value","formatRFC3966","Error"],"mappings":";;AAAA,SAASA,sBAAT,QAAuC,SAAvC;;AAEA;;AAEA;;;;AAIA,OAAO,SAASC,YAAT,CAAsBC,IAAtB,EACP;AACC,KAAIC,eAAJ;AACA,KAAIC,YAAJ;;AAFD;AAAA;AAAA;;AAAA;AAIC,oCAAmBF,KAAKG,KAAL,CAAW,GAAX,CAAnB,4GACA;AAAA,OADWC,IACX;;AAAA,qBACuBA,KAAKD,KAAL,CAAW,GAAX,CADvB;AAAA;AAAA,OACQE,IADR;AAAA,OACcC,KADd;;AAEC,WAAQD,IAAR;AAEC,SAAK,KAAL;AACCJ,cAASK,KAAT;AACA;AACD,SAAK,KAAL;AACCJ,WAAMI,KAAN;AACA;AACD,SAAK,eAAL;AACC;AACA;AACA,SAAIA,MAAM,CAAN,MAAa,GAAjB,EAAsB;AACrBL,eAASK,QAAQL,MAAjB;AACA;AACD;AAdF;AAgBA;;AAED;AAzBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BC,KAAI,CAACH,uBAAuBG,MAAvB,CAAL,EACA;AACC,SAAO,EAAP;AACA;;AAED,QAAO;AACNA,gBADM;AAENC;AAFM,EAAP;AAIA;;AAED;;;;AAIA,OAAO,SAASK,aAAT,OACP;AAAA,KADgCN,MAChC,QADgCA,MAChC;AAAA,KADwCC,GACxC,QADwCA,GACxC;;AACC,KAAI,CAACD,MAAL,EACA;AACC,SAAO,EAAP;AACA;;AAED,KAAIA,OAAO,CAAP,MAAc,GAAlB,EACA;AACC,QAAM,IAAIO,KAAJ,6DAAN;AACA;;AAED,iBAAcP,MAAd,IAAuBC,MAAM,UAAUA,GAAhB,GAAsB,EAA7C;AACA","file":"RFC3966.js","sourcesContent":["import { is_viable_phone_number } from './parse'\r\n\r\n// https://www.ietf.org/rfc/rfc3966.txt\r\n\r\n/**\r\n * @param  {string} text - Phone URI (RFC 3966).\r\n * @return {object} `{ ?number, ?ext }`.\r\n */\r\nexport function parseRFC3966(text)\r\n{\r\n\tlet number\r\n\tlet ext\r\n\r\n\tfor (const part of text.split(';'))\r\n\t{\r\n\t\tconst [name, value] = part.split(':')\r\n\t\tswitch (name)\r\n\t\t{\r\n\t\t\tcase 'tel':\r\n\t\t\t\tnumber = value\r\n\t\t\t\tbreak\r\n\t\t\tcase 'ext':\r\n\t\t\t\text = value\r\n\t\t\t\tbreak\r\n\t\t\tcase 'phone-context':\r\n\t\t\t\t// Only \"country contexts\" are supported.\r\n\t\t\t\t// \"Domain contexts\" are ignored.\r\n\t\t\t\tif (value[0] === '+') {\r\n\t\t\t\t\tnumber = value + number\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\t// If the phone number is not viable, then abort.\r\n\tif (!is_viable_phone_number(number))\r\n\t{\r\n\t\treturn {}\r\n\t}\r\n\r\n\treturn {\r\n\t\tnumber,\r\n\t\text\r\n\t}\r\n}\r\n\r\n/**\r\n * @param  {object} - `{ ?number, ?extension }`.\r\n * @return {string} Phone URI (RFC 3966).\r\n */\r\nexport function formatRFC3966({ number, ext })\r\n{\r\n\tif (!number)\r\n\t{\r\n\t\treturn ''\r\n\t}\r\n\r\n\tif (number[0] !== '+')\r\n\t{\r\n\t\tthrow new Error(`\"formatRFC3966()\" expects \"number\" to be in E.164 format.`)\r\n\t}\r\n\r\n\treturn `tel:${number}${ext ? ';ext=' + ext : ''}`\r\n}"]}