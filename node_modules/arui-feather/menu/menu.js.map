{"version":3,"sources":["menu/menu.jsx"],"names":["Menu","state","highlightedItem","checkedItems","hovered","menuItemList","blurTimeoutId","componentDidMount","props","content","length","mode","firstItem","getFirstItem","changeCheckedItems","value","componentWillReceiveProps","nextProps","forEach","item","index","ref","instance","onHighlightItem","componentWillUpdate","componentWillUnmount","clearTimeout","render","cn","root","style","size","view","groupView","disabled","id","handleMouseEnter","handleMouseLeave","handleKeyDown","handleKeyUp","handleFocus","handleBlur","renderMenuItemList","result","groupKey","type","push","title","renderMenuItem","itemProps","isItemChecked","getIndexInCheckedItemsList","isItemDisabled","clickHandler","onClick","handleMenuItemClick","menuItem","menuItemProps","undefined","iconSize","key","handleMenuItemMouseEnter","handleMenuItemMouseLeave","setNewCheckedItems","onItemClick","event","setState","onMouseEnter","onMouseLeave","onKeyUp","highlightedMenuItem","menuIteListLength","which","DOWN_ARROW","preventDefault","UP_ARROW","ENTER","SPACE","onKeyDown","onFocus","persist","setTimeout","document","activeElement","onBlur","getNode","focus","autoFocusFirstItem","blur","Array","from","indexInCheckedItemsList","splice","onItemCheck","indexOf","Component","defaultProps","propTypes","string","oneOf","bool","focused","shape","oneOfType","number","any","arrayOf","node","array","object","theme","className","func"],"mappings":"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","file":"menu.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/* eslint jsx-a11y/no-static-element-interactions: 0 */\n\nimport autobind from 'core-decorators/lib/autobind';\nimport React from 'react';\nimport styleType from 'react-style-proptype';\nimport Type from 'prop-types';\n\nimport IconCheck from '../icon/ui/check';\nimport MenuItem from '../menu-item/menu-item';\n\nimport cn from '../cn';\nimport { isNodeOutsideElement } from '../lib/window';\nimport keyboardCode from '../lib/keyboard-code';\nimport performance from '../performance';\n\n/**\n * Компонент меню.\n */\n@cn('menu')\n@performance(true)\nclass Menu extends React.Component {\n    static propTypes = {\n        /** Тип расположения меню: 'horizontal' */\n        view: Type.string,\n        /** Размещение заголовка групп: обычное или в одну строку с первым элементом группы */\n        groupView: Type.oneOf(['default', 'line']),\n        /** Тип списка вариантов меню */\n        mode: Type.oneOf(['basic', 'check', 'radio', 'radio-check']),\n        /** Управление возможностью изменения значения */\n        disabled: Type.bool,\n        /** Управление состоянием фокуса элемента */\n        focused: Type.bool,\n        /** Управление автоматическим фокусом на первом элементе при вызове публичного метода focus */\n        autoFocusFirstItem: Type.bool,\n        /** Элемент меню, на котором стоит выделение */\n        highlightedItem: Type.shape({\n            /** Уникальный идентификатор */\n            ref: Type.oneOfType([Type.number, Type.string]),\n            /** Элемент списка типа ContentItem */\n            item: Type.any\n        }),\n        /** Список объектов ContentItem */\n        content: Type.arrayOf(Type.shape({\n            /** Тип элемента */\n            type: Type.oneOf(['item', 'group']),\n            /** Только для type='item', свойство для компонента [MenuItem](#!/MenuItem) */\n            value: Type.oneOfType([Type.string, Type.number]),\n            /** Содержание элемента */\n            content: Type.oneOfType([Type.node, Type.array]),\n            /** Только для type='item': свойства для компонента [MenuItem](#!/MenuItem) */\n            props: Type.object\n        })),\n        /** Список значений выбранных элементов */\n        checkedItems: Type.arrayOf(Type.oneOfType([\n            Type.string,\n            Type.number\n        ])),\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Объект со стилями */\n        style: styleType,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Обработчик клика по варианту меню */\n        onItemClick: Type.func,\n        /** Обработчик выбора варианта меню */\n        onItemCheck: Type.func,\n        /** Обработчик события наведения курсора на меню */\n        onMouseEnter: Type.func,\n        /** Обработчик события снятия курсора с меню */\n        onMouseLeave: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события отжатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyUp: Type.func,\n        /** Обработчик фокуса */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса */\n        onBlur: Type.func,\n        /** Обработчик события выделения элемента меню, принимает на вход переменную типа HighlightedItem */\n        onHighlightItem: Type.func\n    };\n\n    static defaultProps = {\n        size: 'm',\n        mode: 'basic',\n        groupView: 'default',\n        autoFocusFirstItem: false\n    };\n\n    state = {\n        highlightedItem: null,\n        checkedItems: [],\n        hovered: false\n    };\n\n    root;\n    menuItemList = [];\n    blurTimeoutId = null;\n\n    componentDidMount() {\n        if (!!this.props.content && this.props.content.length > 0\n            && (!this.props.checkedItems || this.props.checkedItems.length === 0)\n            && this.props.mode === 'radio') {\n            let firstItem = this.getFirstItem(this.props.content);\n\n            this.changeCheckedItems([firstItem.value]);\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.mode !== 'check' && this.state.checkedItems[0] &&\n            nextProps.checkedItems[0] !== this.state.checkedItems[0]) {\n            let highlightedItem = null;\n\n            this.menuItemList.forEach((item, index, menuItemList) => {\n                if (item.ref === nextProps.checkedItems[0]) {\n                    highlightedItem = menuItemList[index].instance;\n                }\n            });\n\n            if (this.props.onHighlightItem) {\n                this.props.onHighlightItem(highlightedItem);\n            }\n        }\n    }\n\n    componentWillUpdate() {\n        this.menuItemList = [];\n    }\n\n    componentWillUnmount() {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n    }\n\n    render(cn) {\n        /* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n        return (\n            <div\n                ref={ (root) => { this.root = root; } }\n                style={ this.props.style }\n                className={ cn({\n                    size: this.props.size,\n                    view: this.props.view,\n                    'group-view': this.props.groupView,\n                    hovered: this.state.hovered,\n                    disabled: this.props.disabled,\n                    mode: this.props.mode\n                }) }\n                id={ this.props.id }\n                tabIndex={ 0 }\n                onMouseEnter={ this.handleMouseEnter }\n                onMouseLeave={ this.handleMouseLeave }\n                onKeyDown={ this.handleKeyDown }\n                onKeyUp={ this.handleKeyUp }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n            >\n                { !!this.props.content && this.renderMenuItemList(cn, this.props.content) }\n            </div>\n        );\n        /* eslint-enable jsx-a11y/no-noninteractive-tabindex */\n    }\n\n    renderMenuItemList(cn, content) {\n        let result = [];\n        let groupKey = 0;\n\n        content.forEach((item) => {\n            if (item.type === 'group') {\n                result.push(\n                    <div\n                        className={ cn('group') }\n                        key={ `group_${groupKey}` }\n                    >\n                        { !!item.title &&\n                            <div className={ cn('group-title') }>\n                                { item.title }\n                            </div>\n                        }\n                        { this.renderMenuItemList(cn, item.content) }\n                    </div>\n                );\n                groupKey += 1;\n            } else {\n                result.push(this.renderMenuItem(item));\n            }\n        });\n\n        return result;\n    }\n\n    renderMenuItem(item) {\n        let itemProps = item.props || {};\n        let isItemChecked = this.getIndexInCheckedItemsList(item.value) !== -1;\n        let isItemDisabled = this.props.disabled || itemProps.disabled;\n        let clickHandler = this.props.mode === 'basic' ? itemProps.onClick : () => this.handleMenuItemClick(item);\n        let menuItem = {\n            item,\n            ref: item.value\n        };\n        let menuItemProps = {\n            ...itemProps,\n            disabled: isItemDisabled,\n            value: item.value,\n            size: this.props.size || itemProps.size,\n            onClick: !isItemDisabled ? clickHandler : undefined\n        };\n        let highlightedItem = this.props.highlightedItem === undefined\n            ? this.state.highlightedItem\n            : this.props.highlightedItem;\n        let iconSize;\n\n        switch (this.props.size) {\n            case 's': case 'm': iconSize = 's'; break;\n            case 'l': case 'xl': iconSize = 'm'; break;\n        }\n\n        this.menuItemList.push(menuItem);\n\n        return (\n            <MenuItem\n                { ...menuItemProps }\n                ref={ (instance) => { menuItem.instance = instance; } }\n                key={ item.key || item.value }\n                checked={ isItemChecked }\n                type={ this.props.mode !== 'basic' ? 'block' : itemProps.type }\n                onMouseEnter={ () => this.handleMenuItemMouseEnter(menuItem) }\n                onMouseLeave={ this.handleMenuItemMouseLeave }\n                hovered={ highlightedItem && highlightedItem.ref === menuItem.ref }\n            >\n                {\n                    this.props.mode === 'check' && isItemChecked &&\n                    <IconCheck\n                        size={ iconSize }\n                    />\n                }\n                { item.content }\n            </MenuItem>\n        );\n    }\n\n    @autobind\n    handleMenuItemClick(item) {\n        this.setNewCheckedItems(item);\n\n        if (this.props.onItemClick) {\n            this.props.onItemClick(item);\n        }\n    }\n\n    @autobind\n    handleMouseEnter(event) {\n        this.setState({ hovered: true });\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    }\n\n    @autobind\n    handleMouseLeave(event) {\n        this.setState({ hovered: false });\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    }\n\n    @autobind\n    handleKeyUp(event) {\n        if (this.props.onKeyUp) {\n            this.props.onKeyUp(event);\n        }\n    }\n\n    @autobind\n    handleKeyDown(event) {\n        let highlightedItem = null;\n        let highlightedMenuItem = null;\n        let menuIteListLength = this.menuItemList.length;\n\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n\n                if (this.state.highlightedItem) {\n                    this.menuItemList.forEach((item, index, menuItemList) => {\n                        if (item.ref === this.state.highlightedItem.ref) {\n                            if (index + 1 === menuIteListLength) {\n                                [highlightedItem] = menuItemList;\n                            } else {\n                                highlightedItem = menuItemList[index + 1];\n                            }\n                        }\n                    });\n                } else {\n                    [highlightedItem] = this.menuItemList;\n                }\n\n                this.setState({\n                    highlightedItem\n                });\n\n                if (this.props.onHighlightItem) {\n                    this.props.onHighlightItem(highlightedItem);\n                }\n\n                break;\n            }\n            case keyboardCode.UP_ARROW: {\n                event.preventDefault();\n\n                if (this.state.highlightedItem) {\n                    this.menuItemList.forEach((item, index, menuItemList) => {\n                        if (item.ref === this.state.highlightedItem.ref) {\n                            if (index - 1 < 0) {\n                                highlightedItem = menuItemList[menuIteListLength - 1];\n                            } else {\n                                highlightedItem = menuItemList[index - 1];\n                            }\n                        }\n                    });\n                } else {\n                    highlightedItem = this.menuItemList[menuIteListLength - 1];\n                }\n\n                this.setState({\n                    highlightedItem\n                });\n\n                if (this.props.onHighlightItem) {\n                    this.props.onHighlightItem(highlightedItem);\n                }\n\n                break;\n            }\n            case keyboardCode.ENTER:\n            case keyboardCode.SPACE: {\n                event.preventDefault();\n\n                highlightedItem = this.props.highlightedItem === undefined\n                    ? this.state.highlightedItem\n                    : this.props.highlightedItem;\n\n                if (highlightedItem) {\n                    this.setNewCheckedItems(highlightedItem.item);\n                }\n\n                break;\n            }\n        }\n\n        if (highlightedItem) {\n            highlightedMenuItem = highlightedItem.instance;\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event, highlightedMenuItem);\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        event.persist();\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n        }\n\n        this.blurTimeoutId = setTimeout(() => {\n            if (isNodeOutsideElement(document.activeElement, this.root) && this.props.onBlur) {\n                this.props.onBlur(event);\n            }\n            this.blurTimeoutId = null;\n        }, 0);\n    }\n\n    handleMenuItemMouseEnter(menuItem) {\n        this.setState({\n            highlightedItem: menuItem\n        });\n\n        if (this.props.onHighlightItem) {\n            this.props.onHighlightItem(menuItem);\n        }\n    }\n\n    @autobind\n    handleMenuItemMouseLeave() {\n        this.setState({\n            highlightedItem: null\n        });\n\n        if (this.props.onHighlightItem) {\n            this.props.onHighlightItem(null);\n        }\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.root;\n    }\n\n    /**\n     * Устанавливает фокус на меню.\n     *\n     * @public\n     */\n    focus() {\n        this.root.focus();\n\n        if (this.props.autoFocusFirstItem) {\n            let highlightedItem = this.menuItemList[0];\n            this.setState({\n                highlightedItem\n            });\n\n            if (this.props.onHighlightItem) {\n                this.props.onHighlightItem(highlightedItem);\n            }\n        }\n    }\n\n    /**\n     * Убирает фокус с меню.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n\n    setNewCheckedItems(item) {\n        let { value } = item;\n        let checkedItems = this.props.checkedItems !== undefined\n            ? Array.from(this.props.checkedItems)\n            : Array.from(this.state.checkedItems);\n        let indexInCheckedItemsList = this.getIndexInCheckedItemsList(value);\n\n        switch (this.props.mode) {\n            case 'check':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems.push(value);\n                } else {\n                    checkedItems.splice(indexInCheckedItemsList, 1);\n                }\n                break;\n            case 'radio':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems = [value];\n                }\n                break;\n            case 'radio-check':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems = [value];\n                } else {\n                    checkedItems = [];\n                }\n                break;\n            default:\n                break;\n        }\n\n        this.changeCheckedItems(checkedItems);\n        this.focus();\n    }\n\n    /**\n     * Изменяет выбранные значения.\n     *\n     * @param {Array.<String|Number>} checkedItems Список выбранных значений\n     */\n    changeCheckedItems(checkedItems) {\n        this.setState({\n            checkedItems\n        });\n\n        if (this.props.onItemCheck) {\n            this.props.onItemCheck(checkedItems);\n        }\n    }\n\n    @autobind\n    getIndexInCheckedItemsList(value) {\n        let checkedItems = this.props.checkedItems ? this.props.checkedItems : this.state.checkedItems;\n        return checkedItems.indexOf(value);\n    }\n\n    getFirstItem(content) {\n        let firstItem = content[0];\n\n        return firstItem.type === 'group' ? this.getFirstItem(firstItem.content) : firstItem;\n    }\n}\n\nexport default Menu;\n"]}