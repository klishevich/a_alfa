{"version":3,"sources":["lib/match-media.js"],"names":["getMatchMedia","releaseMatchMedia","pool","refCounters","queryProp","query","window","matchMedia"],"mappings":";;;QAWgBA,a,GAAAA,a;QAkBAC,iB,GAAAA,iB;;AA7BhB;;;;;;AAEA,IAAIC,OAAO,EAAX;AACA,IAAIC,cAAc,EAAlB;;AAEA;;;;;;AAMO,SAASH,aAAT,CAAuBI,SAAvB,EAAkC;AACrC,QAAIC,QAAQ,aAAOD,SAAP,KAAqBA,SAAjC;;AAEA,QAAI,CAACF,KAAKG,KAAL,CAAL,EAAkB;AACdH,aAAKG,KAAL,IAAcC,OAAOC,UAAP,CAAkBF,KAAlB,CAAd;AACAF,oBAAYE,KAAZ,IAAqB,CAArB;AACH,KAHD,MAGO;AACHF,oBAAYE,KAAZ,KAAsB,CAAtB;AACH;;AAED,WAAOH,KAAKG,KAAL,CAAP;AACH;;AAED;;;;;AAKO,SAASJ,iBAAT,CAA2BG,SAA3B,EAAsC;AACzC,QAAIC,QAAQ,aAAOD,SAAP,KAAqBA,SAAjC;;AAEAD,gBAAYE,KAAZ,KAAsB,CAAtB;;AAEA,QAAIH,KAAKG,KAAL,KAAeF,YAAYE,KAAZ,MAAuB,CAA1C,EAA6C;AACzC,eAAOH,KAAKG,KAAL,CAAP;AACA,eAAOF,YAAYE,KAAZ,CAAP;AACH;AACJ","file":"match-media.js","sourcesContent":["import MqList from '../mq/mq.json';\n\nlet pool = {};\nlet refCounters = {};\n\n/**\n * Возвращает MediaQueryList для заданного media-выражения.\n *\n * @param {String} queryProp media выражение или кастомные запросы из `src/mq/mq.json`, например `--small`.\n * @returns {MediaQueryList}\n */\nexport function getMatchMedia(queryProp) {\n    let query = MqList[queryProp] || queryProp;\n\n    if (!pool[query]) {\n        pool[query] = window.matchMedia(query);\n        refCounters[query] = 1;\n    } else {\n        refCounters[query] += 1;\n    }\n\n    return pool[query];\n}\n\n/**\n * Удаляет MediaQueryList.\n *\n * @param {String} queryProp media выражение\n */\nexport function releaseMatchMedia(queryProp) {\n    let query = MqList[queryProp] || queryProp;\n\n    refCounters[query] -= 1;\n\n    if (pool[query] && refCounters[query] === 0) {\n        delete pool[query];\n        delete refCounters[query];\n    }\n}\n"]}