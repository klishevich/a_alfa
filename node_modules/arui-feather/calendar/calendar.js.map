{"version":3,"sources":["calendar/calendar.jsx"],"names":["DAYS_IN_WEEK","ATTR_DAY","ATTR_STEP_SIZE","ATTR_DISABLED","Calendar","blurTimeoutId","componentWillMount","prepareData","componentWillReceiveProps","nextProps","componentWillUnmount","clearTimeout","render","cn","rows","push","renderShortWeekdays","concat","renderMonth","root","props","id","handleBlur","handleFocus","isKeyboard","handleKeyDown","handleKeyUp","renderTitle","map","row","index","month","Date","state","isPrevMonthEnabled","earlierLimit","isNextMonthEnabled","laterLimit","prevYearEarlierLimit","isPrevYearEnabled","nextYearLaterLimit","isNextYearEnabled","showArrows","direction","double","disabled","handleArrowClick","months","getMonth","getFullYear","weekdays","weekdayName","type","calculateWeeks","renderWeek","week","day","off","isValidDate","event","isEventDay","current","val","value","weekend","mods","isSameDate","getTime","isBetweenPeriod","selectedFrom","selectedTo","showToday","dataDay","handleDayClick","getDate","target","attributes","performChange","parseInt","nodeValue","onFocus","persist","setTimeout","document","activeElement","onBlur","currentTarget","stepSize","step","newMonth","setMonth","onMonthChange","valueOf","setState","which","DOWN_ARROW","preventDefault","performChangeWithShift","UP_ARROW","LEFT_ARROW","RIGHT_ARROW","onKeyDown","onKeyUp","focus","blur","getNode","isFinite","isOffDay","date","offDays","Array","isArray","timestamp","eventDays","isTriggeredByKeyboard","onValueChange","outputFormat","dayShift","ensureValueInLimits","Math","abs","shiftedValue","shiftedDay","weekDay","weeks","lastDay","dateIterator","fill","setDate","isInitializing","maxTimestamp","max","minTimestamp","min","Component","defaultProps","propTypes","number","func","string","arrayOf","bool","theme","oneOf","className"],"mappings":"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","file":"calendar.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\nimport autobind from 'core-decorators/lib/autobind';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport differenceInMonths from 'date-fns/difference_in_months';\nimport differenceInMilliseconds from 'date-fns/difference_in_milliseconds';\nimport startOfDay from 'date-fns/start_of_day';\nimport startOfMonth from 'date-fns/start_of_month';\nimport addDays from 'date-fns/add_days';\nimport addYears from 'date-fns/add_years';\nimport subtractYears from 'date-fns/sub_years';\nimport formatDate from 'date-fns/format';\nimport isSameMonth from 'date-fns/is_same_month';\nimport sortedIndexOf from 'lodash.sortedindexof';\n\nimport cn from '../cn';\nimport keyboardCode from '../lib/keyboard-code';\nimport performance from '../performance';\nimport isCurrentDay from './utils';\nimport { normalizeDate, getRussianWeekDay } from '../lib/date-utils';\nimport { isNodeOutsideElement } from '../lib/window';\n\nconst DAYS_IN_WEEK = 7;\nconst ATTR_DAY = 'data-day';\nconst ATTR_STEP_SIZE = 'data-step';\nconst ATTR_DISABLED = 'data-disabled';\n\n/**\n * Компонент календаря.\n */\n@cn('calendar')\n@performance(true)\nclass Calendar extends React.Component {\n    static propTypes = {\n        /** Выбранная дата, в формате unix timestamp */\n        value: Type.number,\n        /** Левая граница диапазона дат, в формате unix timestamp */\n        selectedFrom: Type.number,\n        /** Правая граница диапазона дат, в формате unix timestamp */\n        selectedTo: Type.number,\n        /** Левая граница дат, возможных для выбора, в формате unix timestamp */\n        earlierLimit: Type.number,\n        /** Правая граница дат, возможных для выбора, в формате unix timestamp */\n        laterLimit: Type.number,\n        /** Месяц, в формате unix timestamp */\n        month: Type.number,\n        /** Обработчик смены даты */\n        onValueChange: Type.func,\n        /** Обработчик смены месяца */\n        onMonthChange: Type.func,\n        /** Тип форматирования даты при выводе */\n        outputFormat: Type.string,\n        /** Список названий месяцев */\n        months: Type.arrayOf(Type.string),\n        /** Список названий дней недели */\n        weekdays: Type.arrayOf(Type.string),\n        /** Список выходных дней в виде unix timestamp, отсортированный по возрастанию */\n        offDays: Type.arrayOf(Type.number),\n        /** Спиоск дней с событиями в виде unix timestamp, отсортированный по возрастанию */\n        eventDays: Type.arrayOf(Type.number),\n        /** Отображение текущей даты */\n        showToday: Type.bool,\n        /** Отображение стрелок навигации по месяцам */\n        showArrows: Type.bool,\n        /** Возможность управления календарём с клавиатуры */\n        isKeyboard: Type.bool,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события отжатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyUp: Type.func,\n        /** Обработчик фокуса */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса */\n        onBlur: Type.func\n    };\n\n    static defaultProps = {\n        selectedFrom: null,\n        selectedTo: null,\n        outputFormat: 'DD.MM.YYYY',\n        weekdays: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],\n        months: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',\n            'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],\n        offDays: [],\n        eventDays: [],\n        showToday: false,\n        showArrows: true,\n        isKeyboard: true\n    };\n\n    /**\n     * @type {HTMLDivElement}\n     */\n    root;\n\n    /**\n     * @type {Number}\n     */\n    blurTimeoutId = null;\n\n    componentWillMount() {\n        this.prepareData();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.prepareData(nextProps);\n    }\n\n    componentWillUnmount() {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n    }\n\n    render(cn) {\n        let rows = [];\n        rows.push(this.renderShortWeekdays(cn));\n        rows = rows.concat(this.renderMonth(cn));\n\n        return (\n            <div\n                ref={ (root) => { this.root = root; } }\n                className={ cn() }\n                id={ this.props.id }\n                role='grid'\n                tabIndex='0'\n                onBlur={ this.handleBlur }\n                onFocus={ this.handleFocus }\n                onKeyDown={ this.props.isKeyboard && this.handleKeyDown }\n                onKeyUp={ this.props.isKeyboard && this.handleKeyUp }\n            >\n                { this.renderTitle(cn) }\n                <table className={ cn('layout') }>\n                    <tbody>\n                        {\n                            rows.map((row, index) => (\n                                <tr\n                                    className={ cn('row') }\n                                    key={ `row_${index + 1}` }\n                                >\n                                    { row }\n                                </tr>\n                            ))\n                        }\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n\n    renderTitle(cn) {\n        const month = new Date(this.state.month);\n        let isPrevMonthEnabled = !this.earlierLimit\n            || differenceInMonths(month, startOfMonth(this.earlierLimit)) > 0;\n        let isNextMonthEnabled = !this.laterLimit\n            || differenceInMonths(month, this.laterLimit) < 0;\n        let prevYearEarlierLimit = this.earlierLimit && addYears(this.earlierLimit, 1);\n        let isPrevYearEnabled = !this.earlierLimit\n            || differenceInMonths(month, prevYearEarlierLimit) >= 0;\n        let nextYearLaterLimit = this.laterLimit && subtractYears(this.laterLimit, 1);\n        let isNextYearEnabled = !this.laterLimit\n            || differenceInMonths(month, nextYearLaterLimit) <= 0;\n\n        return (\n            <div className={ cn('title') }>\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'left',\n                                double: true,\n                                disabled: !isPrevYearEnabled\n                            })\n                        }\n                        data-step='-12'\n                        data-disabled={ !isPrevMonthEnabled }\n                        role='button'\n                        tabIndex='0'\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'left',\n                                disabled: !isPrevMonthEnabled\n                            })\n                        }\n                        data-step='-1'\n                        data-disabled={ !isPrevMonthEnabled }\n                        role='button'\n                        tabIndex='0'\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'right',\n                                double: true,\n                                disabled: !isNextYearEnabled\n                            })\n                        }\n                        data-step='12'\n                        data-disabled={ !isNextMonthEnabled }\n                        role='button'\n                        tabIndex='0'\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'right',\n                                disabled: !isNextMonthEnabled\n                            })\n                        }\n                        data-step='1'\n                        data-disabled={ !isNextMonthEnabled }\n                        role='button'\n                        tabIndex='0'\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                <div className={ cn('name') }>\n                    { `${this.props.months[month.getMonth()]} ${month.getFullYear()}` }\n                </div>\n            </div>\n        );\n    }\n\n    renderShortWeekdays(cn) {\n        return this.props.weekdays.map((weekdayName, index) => (\n            <th\n                className={ cn('dayname', { type: index > 4 ? 'weekend' : false }) }\n                key={ weekdayName }\n            >\n                { weekdayName }\n            </th>\n        ));\n    }\n\n    renderMonth(cn) {\n        return this.calculateWeeks().map(week => this.renderWeek(cn, week));\n    }\n\n    renderWeek(cn, week) {\n        return week.map((day, index) => {\n            let off = !this.isValidDate(day);\n            let event = this.isEventDay(day);\n            let current = isCurrentDay(day);\n            let val = this.value;\n            let weekend = index > 4;\n            let mods = {};\n            if (day) {\n                let isSameDate = val && val.getTime() === day.getTime();\n                let isBetweenPeriod = this.selectedFrom && this.selectedTo &&\n                    this.selectedFrom <= day && this.selectedTo >= day;\n\n                if (off || weekend) {\n                    if (weekend) {\n                        mods.type = off ? 'weekend-off' : 'weekend';\n                    } else {\n                        mods.type = 'off';\n                    }\n                }\n\n                mods.event = event;\n\n                if (current && this.props.showToday) {\n                    mods.state = 'today';\n                }\n\n                if (isSameDate || isBetweenPeriod) {\n                    mods.state = 'current';\n                }\n            }\n\n            let dataDay = day && !off\n                ? day.getTime()\n                : null;\n\n            return (\n                <td\n                    className={ cn('day', mods) }\n                    data-day={ dataDay }\n                    key={ day || `day_${index + 1}` }\n                    role='gridcell'\n                    onClick={ this.handleDayClick }\n                >\n                    { day ? day.getDate() : '' }\n                    { mods.event && <span data-day={ dataDay } className={ cn('event') } /> }\n                </td>\n            );\n        });\n    }\n\n    @autobind\n    handleDayClick(event) {\n        let day = event.target.attributes[ATTR_DAY];\n        if (day) {\n            this.performChange(parseInt(day.nodeValue, 10));\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        event.persist();\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n        }\n\n        this.blurTimeoutId = setTimeout(() => {\n            if (isNodeOutsideElement(document.activeElement, this.root) && this.props.onBlur) {\n                this.props.onBlur(event);\n            }\n            this.blurTimeoutId = null;\n        }, 0);\n    }\n\n    @autobind\n    handleArrowClick(event) {\n        if (event.currentTarget.attributes[ATTR_DISABLED].nodeValue === 'true') {\n            return;\n        }\n\n        let stepSize = event.currentTarget.attributes[ATTR_STEP_SIZE].nodeValue;\n        let step = parseInt(stepSize, 10);\n        let newMonth = new Date(this.state.month);\n        newMonth.setMonth(newMonth.getMonth() + step);\n\n        if (this.props.onMonthChange) {\n            this.props.onMonthChange(newMonth.valueOf());\n        } else {\n            this.setState({\n                month: newMonth.valueOf()\n            });\n        }\n    }\n\n    @autobind\n    handleKeyDown(event) {\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n                this.performChangeWithShift(7, true);\n                break;\n            }\n            case keyboardCode.UP_ARROW:\n                event.preventDefault();\n                this.performChangeWithShift(-7, true);\n                break;\n            case keyboardCode.LEFT_ARROW: {\n                event.preventDefault();\n                this.performChangeWithShift(-1, true);\n                break;\n            }\n            case keyboardCode.RIGHT_ARROW: {\n                event.preventDefault();\n                this.performChangeWithShift(1, true);\n                break;\n            }\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event);\n        }\n    }\n\n    @autobind\n    handleKeyUp(event) {\n        if (this.props.onKeyUp) {\n            this.props.onKeyUp(event);\n        }\n    }\n\n    /**\n     * Устанавливает фокус на календарь.\n     *\n     * @public\n     */\n    focus() {\n        this.root.focus();\n    }\n\n    /**\n     * Убирает фокус с календаря.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.root;\n    }\n\n    /**\n     * Возвращает `true`, если переданная дата является валидной,\n     * попадает в заданные лимиты календаря и не является выходным днем.\n     *\n     * @param {Date|Number} value Дата для проверки\n     * @returns {Boolean}\n     */\n    isValidDate(value) {\n        if (!value) {\n            return false;\n        }\n\n        /* eslint-disable no-restricted-globals */\n        if (!(value instanceof Date) || !isFinite(value.valueOf())) {\n            return false;\n        }\n        /* eslint-enable no-restricted-globals */\n\n        return !(\n            (this.earlierLimit && this.earlierLimit > value) ||\n            (this.laterLimit && this.laterLimit < value) ||\n            this.isOffDay(value)\n        );\n    }\n\n    /**\n     * Возвращает `true`, если переданная дата является выходным днем.\n     *\n     * @param {Data|Number} date Дата для проверки\n     * @returns {Boolean}\n     */\n    isOffDay(date) {\n        if (this.props.offDays && Array.isArray(this.props.offDays)) {\n            let timestamp = date.valueOf();\n\n            // Поскольку offDays - отсортирован, используем бинарный поиск, O(log n) против O(n) для обычного поиска\n            return sortedIndexOf(this.props.offDays, timestamp) !== -1;\n        }\n\n        return false;\n    }\n\n    /**\n     * Возвращает `true`, если переданная дата является днм с событиями.\n     *\n     * @param {Data|Number} date Дата для проверки\n     * @returns {Boolean}\n     */\n    isEventDay(date) {\n        if (this.props.eventDays && Array.isArray(this.props.eventDays) && date !== null) {\n            let timestamp = date.valueOf();\n\n            // Поскольку events - отсортирован, используем бинарный поиск, O(log n) против O(n) для обычного поиска\n            return sortedIndexOf(this.props.eventDays, timestamp) !== -1;\n        }\n\n        return false;\n    }\n\n    /**\n     * Генерирует событие, что значие даты изменилось.\n     *\n     * @param {Number} timestamp Дата\n     * @param {Boolean} [isTriggeredByKeyboard=false] Флаг, что событие произошло из-за нажатия пользователем кнопки на клавиатуре\n     */\n    performChange(timestamp, isTriggeredByKeyboard) {\n        if (!this.props.onValueChange) {\n            return;\n        }\n\n        let date = new Date(timestamp);\n        if (!this.isValidDate(date)) {\n            return;\n        }\n\n        this.props.onValueChange(\n            timestamp,\n            formatDate(date, this.props.outputFormat),\n            isTriggeredByKeyboard\n        );\n    }\n\n    /**\n     * Генерирует событие, что значение даты изменилось на переданной число дней.\n     *\n     * @param {Number} dayShift Смещение текущей даты в днях.\n     * @param {Boolean} [isTriggeredByKeyboard=false] Флаг, что событие произошло из-за нажатия пользователем кнопки на клавиатуре\n     */\n    performChangeWithShift(dayShift, isTriggeredByKeyboard) {\n        if (!this.ensureValueInLimits(dayShift)) {\n            return;\n        }\n\n        while (this.isOffDay(addDays(this.value, dayShift))) {\n            dayShift += Math.abs(dayShift) / dayShift;\n        }\n\n        if (!this.value) {\n            this.performChange(this.state.month, true);\n        } else {\n            let shiftedValue = addDays(this.value, dayShift);\n            this.performChange(shiftedValue.valueOf(), isTriggeredByKeyboard);\n\n            if (this.props.onMonthChange && !isSameMonth(shiftedValue, this.value)) {\n                this.props.onMonthChange(shiftedValue.valueOf());\n            }\n        }\n    }\n\n    ensureValueInLimits(dayShift) {\n        let shiftedDay = addDays(this.value, dayShift);\n\n        return (!this.earlierLimit || differenceInMilliseconds(shiftedDay, this.earlierLimit) >= 0)\n            && (!this.laterLimit || differenceInMilliseconds(shiftedDay, this.laterLimit) <= 0);\n    }\n\n    calculateWeeks() {\n        let weekDay;\n        let weeks = [];\n        let lastDay = 6;\n        let month = new Date(this.state.month);\n        let dateIterator = new Date(this.state.month);\n\n        // Далее я использую map для обхода массива, но при создании через new Array(DAYS_IN_WEEK);\n        // map не вызывает колбек, для ключей, к которым не были приассигнены значения\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\n        // соответственно пропадают undefined значения, поэтому:\n        let week = (new Array(DAYS_IN_WEEK)).fill(null);\n\n        for (\n            dateIterator.setDate(1);\n            dateIterator.getMonth() === month.getMonth();\n            dateIterator.setDate(dateIterator.getDate() + 1)\n        ) {\n            weekDay = getRussianWeekDay(dateIterator); // Получаем 0 - пн, 1 - вт, и т.д.\n\n            week[weekDay] = new Date(dateIterator.getTime());\n\n            if (weekDay === lastDay) {\n                weeks.push(week);\n                week = (new Array(DAYS_IN_WEEK)).fill(null);\n            }\n        }\n\n        if (weekDay !== lastDay) {\n            weeks.push(week);\n        }\n\n        return weeks;\n    }\n\n    prepareData(nextProps) {\n        let isInitializing = false;\n        if (!nextProps) {\n            nextProps = this.props;\n            isInitializing = true;\n        }\n\n        if (isInitializing || this.props.value !== nextProps.value) {\n            if (nextProps.value) {\n                this.value = startOfDay(normalizeDate(nextProps.value));\n            } else {\n                this.value = null;\n            }\n        }\n\n        let month;\n        if (nextProps.month) {\n            month = normalizeDate(nextProps.month);\n        } else if (this.value) {\n            month = new Date(this.value.valueOf());\n        } else {\n            month = new Date();\n        }\n        this.setState({ month: startOfMonth(month) });\n\n        if (isInitializing || this.props.earlierLimit !== nextProps.earlierLimit) {\n            this.earlierLimit = nextProps.earlierLimit ? normalizeDate(nextProps.earlierLimit) : null;\n\n            if (this.earlierLimit) {\n                this.earlierLimit = startOfDay(this.earlierLimit);\n                if (this.value) {\n                    let maxTimestamp = Math.max(\n                        this.value.valueOf(),\n                        this.earlierLimit.valueOf()\n                    );\n                    this.value = new Date(maxTimestamp);\n                }\n            }\n        }\n\n        if (isInitializing || this.props.laterLimit !== nextProps.laterLimit) {\n            this.laterLimit = nextProps.laterLimit ? normalizeDate(nextProps.laterLimit) : null;\n\n            if (this.laterLimit) {\n                this.laterLimit = startOfDay(this.laterLimit);\n                if (this.value) {\n                    let minTimestamp = Math.min(\n                        this.value.valueOf(),\n                        this.laterLimit.valueOf()\n                    );\n                    this.value = new Date(minTimestamp);\n                }\n            }\n        }\n\n        if (isInitializing || this.props.selectedTo !== nextProps.selectedTo) {\n            this.selectedTo = nextProps.selectedTo ? normalizeDate(nextProps.selectedTo) : null;\n        }\n\n        if (isInitializing || this.props.selectedFrom !== nextProps.selectedFrom) {\n            this.selectedFrom = nextProps.selectedFrom ? normalizeDate(nextProps.selectedFrom) : null;\n        }\n    }\n}\n\nexport default Calendar;\n"]}