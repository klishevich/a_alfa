{"version":3,"sources":["slide-down/slide-down.jsx"],"names":["SlideDown","state","height","props","isExpanded","isHeightAuto","componentWillReceiveProps","nextProps","setHeightToContentHeight","setHeightToNull","onAnimationStart","render","cn","id","getHeight","handleTransitionEnd","slideDown","expanded","slideDownContent","children","event","propertyName","setAutoHeight","onAnimationEnd","setState","offsetHeight","forceUpdate","getBoundingClientRect","Component","propTypes","bool","node","theme","oneOf","className","string","func"],"mappings":";;;;iDAAA;;;;AAIA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;IAMMA,S,WAFL,kBAAG,YAAH,C,UACA,4B;;;;;;;;;;;;4JAmBGC,K,GAAQ;AACJC,oBAAQ,MAAKC,KAAL,CAAWC,UAAX,GAAwB,MAAxB,GAAiC,CADrC;AAEJC,0BAAc,MAAKF,KAAL,CAAWC;AAFrB,S;;;wBAQRE,yB,sCAA0BC,S,EAAW;AACjC,YAAI,KAAKJ,KAAL,CAAWC,UAAX,KAA0BG,UAAUH,UAAxC,EAAoD;AAChD,gBAAIG,UAAUH,UAAd,EAA0B;AACtB,qBAAKI,wBAAL;AACH,aAFD,MAEO;AACH,qBAAKC,eAAL;AACH;AACD,gBAAI,KAAKN,KAAL,CAAWO,gBAAf,EAAiC;AAC7B,qBAAKP,KAAL,CAAWO,gBAAX;AACH;AACJ;AACJ,K;;wBAEDC,M,mBAAOC,E,EAAI;AAAA;;AACP,eACI;AAAA;AAAA;AACI,2BAAYA,IADhB;AAEI,oBAAK,KAAKT,KAAL,CAAWU,EAFpB;AAGI,uBACI,EAAEX,QAAQ,KAAKY,SAAL,EAAV,EAJR;AAMI,iCAAkB,KAAKC,mBAN3B;AAOI,qBAAM,aAACC,SAAD,EAAe;AAAE,2BAAKA,SAAL,GAAiBA,SAAjB;AAA6B;AAPxD;AASI;AAAA;AAAA;AACI,+BAAYJ,GAAG,SAAH,EAAc,EAAEK,UAAU,KAAKhB,KAAL,CAAWI,YAAvB,EAAd,CADhB;AAEI,yBAAM,aAACa,gBAAD,EAAsB;AAAE,+BAAKA,gBAAL,GAAwBA,gBAAxB;AAA2C;AAF7E;AAIM,qBAAKf,KAAL,CAAWgB;AAJjB;AATJ,SADJ;AAkBH,K;;wBAGDJ,mB,gCAAoBK,K,EAAO;AACvB,YAAIA,MAAMC,YAAN,KAAuB,QAAvB,IAAmC,KAAKlB,KAAL,CAAWC,UAAlD,EAA8D;AAC1D,iBAAKkB,aAAL;AACH;AACD,YAAI,KAAKnB,KAAL,CAAWoB,cAAf,EAA+B;AAC3B,iBAAKpB,KAAL,CAAWoB,cAAX;AACH;AACJ,K;;wBAEDT,S,wBAAY;AACR,eAAO,KAAKb,KAAL,CAAWI,YAAX,GACD,MADC,GAED,KAAKJ,KAAL,CAAWC,MAFjB;AAGH,K;;wBAEDM,wB,uCAA2B;AACvB,aAAKgB,QAAL,CAAc;AACVnB,0BAAc,KADJ;AAEVH,oBAAQ,KAAKgB,gBAAL,CAAsBO;AAFpB,SAAd;AAIH,K;;wBAEDhB,e,8BAAkB;AAAA;;AACd,aAAKD,wBAAL;;AAEA;AACA,aAAKkB,WAAL,CAAiB,YAAM;AACnB;AACA,mBAAKV,SAAL,CAAeW,qBAAf;AACA,mBAAKH,QAAL,CAAc;AACVtB,wBAAQ;AADE,aAAd;AAGH,SAND;AAOH,K;;wBAEDoB,a,4BAAgB;AACZ,aAAKE,QAAL,CAAc;AACVnB,0BAAc;AADJ,SAAd;AAGH,K;;;EApGmB,gBAAMuB,S;AAAxB5B,S,CACK6B,S,2CAAY;AACf;AACAzB,gBAAY,oBAAK0B,IAFF;AAGf;AACAX,cAAU,oBAAKY,IAJA;AAKf;AACAC,WAAO,oBAAKC,KAAL,CAAW,CAAC,eAAD,EAAkB,eAAlB,CAAX,CANQ;AAOf;AACAC,eAAW,oBAAKC,MARD;AASf;AACAtB,QAAI,oBAAKsB,MAVM;AAWf;AACAzB,sBAAkB,oBAAK0B,IAZR;AAaf;AACAb,oBAAgB,oBAAKa;AAdN,C;kBAsGRpC,S","file":"slide-down.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport autobind from 'core-decorators/lib/autobind';\n\nimport cn from '../cn';\nimport performance from '../performance';\n\n/**\n * Компонент \"расхлопа\".\n * Позволяет скрывать и отображать контент.\n */\n@cn('slide-down')\n@performance()\nclass SlideDown extends React.Component {\n    static propTypes = {\n        /** Управление состоянием expand/collapse компонента */\n        isExpanded: Type.bool,\n        /** Контент компонента */\n        children: Type.node,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Обработчик события начала анимации */\n        onAnimationStart: Type.func,\n        /** Обработчик события окончания анимации */\n        onAnimationEnd: Type.func\n    };\n\n    state = {\n        height: this.props.isExpanded ? 'auto' : 0,\n        isHeightAuto: this.props.isExpanded\n    };\n\n    slideDown;\n    slideDownContent;\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.isExpanded !== nextProps.isExpanded) {\n            if (nextProps.isExpanded) {\n                this.setHeightToContentHeight();\n            } else {\n                this.setHeightToNull();\n            }\n            if (this.props.onAnimationStart) {\n                this.props.onAnimationStart();\n            }\n        }\n    }\n\n    render(cn) {\n        return (\n            <div\n                className={ cn() }\n                id={ this.props.id }\n                style={\n                    { height: this.getHeight() }\n                }\n                onTransitionEnd={ this.handleTransitionEnd }\n                ref={ (slideDown) => { this.slideDown = slideDown; } }\n            >\n                <div\n                    className={ cn('content', { expanded: this.state.isHeightAuto }) }\n                    ref={ (slideDownContent) => { this.slideDownContent = slideDownContent; } }\n                >\n                    { this.props.children }\n                </div>\n            </div>\n        );\n    }\n\n    @autobind\n    handleTransitionEnd(event) {\n        if (event.propertyName === 'height' && this.props.isExpanded) {\n            this.setAutoHeight();\n        }\n        if (this.props.onAnimationEnd) {\n            this.props.onAnimationEnd();\n        }\n    }\n\n    getHeight() {\n        return this.state.isHeightAuto\n            ? 'auto'\n            : this.state.height;\n    }\n\n    setHeightToContentHeight() {\n        this.setState({\n            isHeightAuto: false,\n            height: this.slideDownContent.offsetHeight\n        });\n    }\n\n    setHeightToNull() {\n        this.setHeightToContentHeight();\n\n        // Заставляем React перерисовать элемент\n        this.forceUpdate(() => {\n            // Заставляем браузер сделать reflow\n            this.slideDown.getBoundingClientRect();\n            this.setState({\n                height: 0\n            });\n        });\n    }\n\n    setAutoHeight() {\n        this.setState({\n            isHeightAuto: true\n        });\n    }\n}\n\nexport default SlideDown;\n"]}