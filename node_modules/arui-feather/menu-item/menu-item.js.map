{"version":3,"sources":["menu-item/menu-item.jsx"],"names":["MenuItem","state","hovered","focused","render","cn","content","props","children","value","itemElement","menuItemProps","ref","root","type","control","size","popup","directions","target","handleClick","handleMouseEnter","handleMouseLeave","onClick","onMouseEnter","onMouseLeave","view","disabled","checked","url","handleFocus","handleBlur","hidden","undefined","event","preventDefault","setState","onFocus","onBlur","getNode","focus","blur","document","activeElement","Component","defaultProps","propTypes","oneOf","string","oneOfType","number","node","bool","arrayOf","theme","className","func"],"mappings":";;;;;;kEAAA;;;;AAIA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;IAKMA,Q,WAFL,kBAAG,WAAH,C,UACA,4B;;;;;;;;;;;;4JAmDGC,K,GAAQ;AACJC,qBAAS,KADL;AAEJC,qBAAS;AAFL,S;;;uBAQRC,M,mBAAOC,E,EAAI;AAAA;;AACP,YAAIC,UAAU,KAAKC,KAAL,CAAWC,QAAX,IAAuB,KAAKD,KAAL,CAAWE,KAAhD;AACA,YAAIC,oBAAJ;AACA,YAAIC,gBAAgB;AAChBC,iBAAK,aAACC,IAAD,EAAU;AAAE,uBAAKA,IAAL,GAAYA,IAAZ;AAAmB;AADpB,SAApB;;AAIA,gBAAQ,KAAKN,KAAL,CAAWO,IAAnB;AACI,iBAAK,UAAL;AACIJ,8BACI;AACI,yBAAM,aAACK,OAAD,EAAa;AAAE,+BAAKA,OAAL,GAAeA,OAAf;AAAyB,qBADlD;AAEI,+BAAeV,GAAG,SAAH,CAAf,SAAgCA,GAAG,UAAH,CAFpC;AAGI,0BAAO,KAAKE,KAAL,CAAWS,IAHtB;AAII,4BAAS,KAAKf,KAAL,CAAWC,OAJxB;AAKI,kCAAa,MALjB;AAMI,kCAAeI,OANnB;AAOI,kCAAe,KAAKC,KAAL,CAAWU,KAP9B;AAQI,gCAAa;AACTC,oCAAY,CAAC,aAAD,CADH;AAETC,gCAAQ;AAFC,qBARjB;AAYI,0BAAK,OAZT;AAaI,qCAAkB,KAAKC,WAb3B;AAcI,0CAAuB,KAAKC,gBAdhC;AAeI,0CAAuB,KAAKC;AAfhC,kBADJ;AAmBA;AACJ,iBAAK,OAAL;AACIX,gCAAgB;AACZC,yBAAK,aAACG,OAAD,EAAa;AACd,+BAAKF,IAAL,GAAYE,OAAZ;AACA,+BAAKA,OAAL,GAAeA,OAAf;AACH,qBAJW;AAKZQ,6BAAS,KAAKH,WALF;AAMZI,kCAAc,KAAKH,gBANP;AAOZI,kCAAc,KAAKH;AAPP,iBAAhB;AASAZ,8BAAc;AAAA;AAAA,sBAAM,WAAYL,GAAG,SAAH,CAAlB;AAAoCC;AAApC,iBAAd;;AAEA;AACJ,iBAAK,MAAL;AACA;AACII,8BACI;AAAA;AAAA;AACI,6BAAM,aAACK,OAAD,EAAa;AAAE,mCAAKA,OAAL,GAAeA,OAAf;AAAyB,yBADlD;AAEI,mCAAeV,GAAG,SAAH,CAAf,SAAgCA,GAAG,MAAH,CAFpC;AAGI,8BAAO,KAAKE,KAAL,CAAWS,IAHtB;AAII,gCAAS,KAAKT,KAAL,CAAWmB,IAAX,KAAoB,QAJjC;AAKI,kCAAW,KAAKnB,KAAL,CAAWoB,QAL1B;AAMI,iCAAU,KAAKpB,KAAL,CAAWqB,OANzB;AAOI,8BAAO,KAAKrB,KAAL,CAAWmB,IAAX,KAAoB,OAApB,IAA+BpB,OAP1C;AAQI,6BAAM,KAAKC,KAAL,CAAWsB,GARrB;AASI,gCAAS,KAAKtB,KAAL,CAAWY,MATxB;AAUI,iCAAU,KAAKC,WAVnB;AAWI,iCAAU,KAAKU,WAXnB;AAYI,gCAAS,KAAKC,UAZlB;AAaI,sCAAe,KAAKV,gBAbxB;AAcI,sCAAe,KAAKC;AAdxB;AAgBM,yBAAKf,KAAL,CAAWmB,IAAX,KAAoB,OAApB,IAA+BpB;AAhBrC,iBADJ;AAoBA;AAzDR;;AA4DA,eACI;AAAA;AAAA;AACI,2BAAYD,GAAG;AACXsB,8BAAU,KAAKpB,KAAL,CAAWoB,QADV;AAEXC,6BAAS,KAAKrB,KAAL,CAAWqB,OAFT;AAGXI,4BAAQ,KAAKzB,KAAL,CAAWyB,MAHR;AAIXlB,0BAAM,KAAKP,KAAL,CAAWO,IAJN;AAKXZ,6BAAS,KAAKK,KAAL,CAAWL,OAAX,KAAuB+B,SAAvB,GAAmC,KAAKhC,KAAL,CAAWC,OAA9C,GAAwD,KAAKK,KAAL,CAAWL,OALjE;AAMXC,6BAAS,KAAKF,KAAL,CAAWE;AANT,iBAAH;AADhB,eASSQ,aATT;AAWMD;AAXN,SADJ;AAeH,K;;uBAGDU,W,wBAAYc,K,EAAO;AACf,YAAI,KAAK3B,KAAL,CAAWoB,QAAf,EAAyB;AACrBO,kBAAMC,cAAN;AACA;AACH;;AAED,YAAI,KAAK5B,KAAL,CAAWgB,OAAf,EAAwB;AACpB,iBAAKhB,KAAL,CAAWgB,OAAX,CAAmBW,KAAnB;AACH;AACJ,K;;uBAGDJ,W,wBAAYI,K,EAAO;AACf,aAAKE,QAAL,CAAc,EAAEjC,SAAS,IAAX,EAAd;;AAEA,YAAI,KAAKI,KAAL,CAAW8B,OAAf,EAAwB;AACpB,iBAAK9B,KAAL,CAAW8B,OAAX,CAAmBH,KAAnB;AACH;AACJ,K;;uBAGDH,U,uBAAWG,K,EAAO;AACd,aAAKE,QAAL,CAAc,EAAEjC,SAAS,KAAX,EAAd;;AAEA,YAAI,KAAKI,KAAL,CAAW+B,MAAf,EAAuB;AACnB,iBAAK/B,KAAL,CAAW+B,MAAX,CAAkBJ,KAAlB;AACH;AACJ,K;;uBAGDb,gB,6BAAiBa,K,EAAO;AACpB,aAAKE,QAAL,CAAc,EAAElC,SAAS,IAAX,EAAd;;AAEA,YAAI,KAAKK,KAAL,CAAWiB,YAAf,EAA6B;AACzB,iBAAKjB,KAAL,CAAWiB,YAAX,CAAwBU,KAAxB;AACH;AACJ,K;;uBAGDZ,gB,6BAAiBY,K,EAAO;AACpB,aAAKE,QAAL,CAAc,EAAElC,SAAS,KAAX,EAAd;;AAEA,YAAI,KAAKK,KAAL,CAAWkB,YAAf,EAA6B;AACzB,iBAAKlB,KAAL,CAAWkB,YAAX,CAAwBS,KAAxB;AACH;AACJ,K;;AAED;;;;;;;;uBAMAK,O,sBAAU;AACN,eAAO,KAAK1B,IAAZ;AACH,K;;AAED;;;;;;;uBAKA2B,K,oBAAQ;AACJ,aAAKzB,OAAL,CAAayB,KAAb;AACH,K;;AAED;;;;;;;uBAKAC,I,mBAAO;AACH,YAAIC,SAASC,aAAb,EAA4B;AACxBD,qBAASC,aAAT,CAAuBF,IAAvB;AACH;AACJ,K;;;EA1NkB,gBAAMG,S,WA6ClBC,Y,GAAe;AAClB/B,UAAM,MADY;AAElBY,UAAM;AAFY,C;AA7CpB1B,Q,CACK8C,S,2CAAY;AACf;AACAhC,UAAM,oBAAKiC,KAAL,CAAW,CAAC,MAAD,EAAS,UAAT,EAAqB,OAArB,CAAX,CAFS;AAGf;AACArB,UAAM,oBAAKqB,KAAL,CAAW,CAAC,OAAD,EAAU,YAAV,EAAwB,QAAxB,CAAX,CAJS;AAKf;AACAlB,SAAK,oBAAKmB,MANK;AAOf;AACA7B,YAAQ,oBAAK4B,KAAL,CAAW,CAAC,OAAD,EAAU,QAAV,EAAoB,SAApB,EAA+B,MAA/B,CAAX,CARO;AASf;AACAtC,WAAO,oBAAKwC,SAAL,CAAe,CAClB,oBAAKD,MADa,EAElB,oBAAKE,MAFa,CAAf,CAVQ;AAcf;AACAjC,WAAO,oBAAKkC,IAfG;AAgBf;AACAxB,cAAU,oBAAKyB,IAjBA;AAkBf;AACAxB,aAAS,oBAAKwB,IAnBC;AAoBf;AACApB,YAAQ,oBAAKoB,IArBE;AAsBf;AACAlD,aAAS,oBAAKkD,IAvBC;AAwBf;AACApC,UAAM,oBAAK+B,KAAL,CAAW,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,IAAhB,CAAX,CAzBS;AA0Bf;AACAvC,cAAU,oBAAKyC,SAAL,CAAe,CAAC,oBAAKI,OAAL,CAAa,oBAAKF,IAAlB,CAAD,EAA0B,oBAAKA,IAA/B,CAAf,CA3BK;AA4Bf;AACAG,WAAO,oBAAKP,KAAL,CAAW,CAAC,eAAD,EAAkB,eAAlB,CAAX,CA7BQ;AA8Bf;AACAQ,eAAW,oBAAKP,MA/BD;AAgCf;AACAzB,aAAS,oBAAKiC,IAjCC;AAkCf;AACAnB,aAAS,oBAAKmB,IAnCC;AAoCf;AACAlB,YAAQ,oBAAKkB,IArCE;AAsCf;AACAhC,kBAAc,oBAAKgC,IAvCJ;AAwCf;AACA/B,kBAAc,oBAAK+B;AAzCJ,C;kBA4NRxD,Q","file":"menu-item.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport autobind from 'core-decorators/lib/autobind';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport Dropdown from '../dropdown/dropdown';\nimport Link from '../link/link';\n\nimport cn from '../cn';\nimport performance from '../performance';\n\n/**\n * Компонент элемента меню. Как правило, используется совместно с `Menu`.\n */\n@cn('menu-item')\n@performance()\nclass MenuItem extends React.Component {\n    static propTypes = {\n        /** Тип элемента меню */\n        type: Type.oneOf(['link', 'dropdown', 'block']),\n        /** Тип ссылки, для компонента с type='link' */\n        view: Type.oneOf(['plain', 'underlined', 'pseudo']),\n        /** href ссылки, для компонента с type='link' */\n        url: Type.string,\n        /** target для ссылки */\n        target: Type.oneOf(['_self', '_blank', '_parent', '_top']),\n        /** Уникальное значение элемента. Для использования в Menu */\n        value: Type.oneOfType([\n            Type.string,\n            Type.number\n        ]),\n        /** Попап для компонента с type='dropdown' */\n        popup: Type.node,\n        /** Управление возможностью выбирать данный компонент */\n        disabled: Type.bool,\n        /** Управление состоянием выбран/не выбран компонента */\n        checked: Type.bool,\n        /** Управление видимостью компонента */\n        hidden: Type.bool,\n        /** Управление визуальным выделением компонента */\n        hovered: Type.bool,\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Дочерние элементы `MenuItem` */\n        children: Type.oneOfType([Type.arrayOf(Type.node), Type.node]),\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Только для type='link', обработчик клика по компоненту */\n        onClick: Type.func,\n        /** Обработчик фокуса компонента */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса компонента */\n        onBlur: Type.func,\n        /** Обработчик события наведения курсора на элемент меню */\n        onMouseEnter: Type.func,\n        /** Обработчик события снятия курсора с элемента меню */\n        onMouseLeave: Type.func\n    };\n\n    static defaultProps = {\n        type: 'link',\n        view: 'plain'\n    };\n\n    state = {\n        hovered: false,\n        focused: false\n    };\n\n    root;\n    control;\n\n    render(cn) {\n        let content = this.props.children || this.props.value;\n        let itemElement;\n        let menuItemProps = {\n            ref: (root) => { this.root = root; }\n        };\n\n        switch (this.props.type) {\n            case 'dropdown':\n                itemElement = (\n                    <Dropdown\n                        ref={ (control) => { this.control = control; } }\n                        className={ `${cn('control')} ${cn('dropdown')}` }\n                        size={ this.props.size }\n                        opened={ this.state.hovered }\n                        switcherType='link'\n                        switcherText={ content }\n                        popupContent={ this.props.popup }\n                        popupProps={ {\n                            directions: ['bottom-left'],\n                            target: 'anchor'\n                        } }\n                        mode='hover'\n                        onSwitcherClick={ this.handleClick }\n                        onSwitcherMouseEnter={ this.handleMouseEnter }\n                        onSwitcherMouseLeave={ this.handleMouseLeave }\n                    />\n                );\n                break;\n            case 'block':\n                menuItemProps = {\n                    ref: (control) => {\n                        this.root = control;\n                        this.control = control;\n                    },\n                    onClick: this.handleClick,\n                    onMouseEnter: this.handleMouseEnter,\n                    onMouseLeave: this.handleMouseLeave\n                };\n                itemElement = <span className={ cn('control') }>{ content }</span>;\n\n                break;\n            case 'link':\n            default:\n                itemElement = (\n                    <Link\n                        ref={ (control) => { this.control = control; } }\n                        className={ `${cn('control')} ${cn('link')}` }\n                        size={ this.props.size }\n                        pseudo={ this.props.view === 'pseudo' }\n                        disabled={ this.props.disabled }\n                        checked={ this.props.checked }\n                        text={ this.props.view !== 'plain' && content }\n                        url={ this.props.url }\n                        target={ this.props.target }\n                        onClick={ this.handleClick }\n                        onFocus={ this.handleFocus }\n                        onBlur={ this.handleBlur }\n                        onMouseEnter={ this.handleMouseEnter }\n                        onMouseLeave={ this.handleMouseLeave }\n                    >\n                        { this.props.view === 'plain' && content }\n                    </Link>\n                );\n                break;\n        }\n\n        return (\n            <div\n                className={ cn({\n                    disabled: this.props.disabled,\n                    checked: this.props.checked,\n                    hidden: this.props.hidden,\n                    type: this.props.type,\n                    hovered: this.props.hovered === undefined ? this.state.hovered : this.props.hovered,\n                    focused: this.state.focused\n                }) }\n                { ...menuItemProps }\n            >\n                { itemElement }\n            </div>\n        );\n    }\n\n    @autobind\n    handleClick(event) {\n        if (this.props.disabled) {\n            event.preventDefault();\n            return;\n        }\n\n        if (this.props.onClick) {\n            this.props.onClick(event);\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        this.setState({ focused: true });\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        this.setState({ focused: false });\n\n        if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n    }\n\n    @autobind\n    handleMouseEnter(event) {\n        this.setState({ hovered: true });\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    }\n\n    @autobind\n    handleMouseLeave(event) {\n        this.setState({ hovered: false });\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.root;\n    }\n\n    /**\n     * Устанавливает фокус на элементе меню.\n     *\n     * @public\n     */\n    focus() {\n        this.control.focus();\n    }\n\n    /**\n     * Убирает фокус с элемента меню.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n}\n\nexport default MenuItem;\n"]}